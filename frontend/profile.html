<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Profile - Charité Espoir</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link rel="icon" href="assets/icons/charite_icon.png" type="image/jpg" />
    <link rel="stylesheet" href="css/style.css" />
    <link rel="stylesheet" href="css/profile.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
    />
  </head>
  <body>
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg shadow-sm custom-navbar sticky-top">
      <div class="custom-container container">
        <a class="navbar-brand fw-bold text-white" href="#">Charité Espoir</a>
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarNav"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
          <ul class="navbar-nav ms-auto">
            <li class="nav-item">
              <a class="nav-link text-white" href="index.html">Accueil</a>
            </li>
            <li class="nav-item dropdown" id="accountDropdown">
              <a
                class="nav-link text-white d-flex align-items-center compteicon"
                href="#"
                id="userDropdown"
                role="button"
                data-bs-toggle="dropdown"
                aria-expanded="false"
              >
                <span id="userIconOrText">Compte</span>
              </a>
              <ul
                class="dropdown-menu dropdown-menu-end"
                aria-labelledby="userDropdown"
                id="dropdownContent"
              >
                <!-- Le contenu sera injecté dynamiquement -->
              </ul>
            </li>
          </ul>
        </div>
      </div>
    </nav>
    <header>
      <div class="container">
        <h1 class="fw-bold">Modifier le profile</h1>
      </div>
    </header>
    <main class="container py-5">
      <form id="profileForm" class="row g-3">
        <div class="col-md-6">
          <label for="username" class="form-label">Nom d'utilisateur</label>
          <input
            type="text"
            class="form-control"
            id="username"
            name="username"
            required
          />
        </div>
        <div class="col-md-6">
          <label for="email" class="form-label">Adresse e-mail</label>
          <input
            type="email"
            class="form-control"
            id="email"
            name="email"
            required
          />
        </div>
        <div class="col-md-6">
          <label for="lastName" class="form-label">Nom</label>
          <input
            type="text"
            class="form-control"
            id="lastName"
            name="last_name"
          />
        </div>
        <div class="col-md-6">
          <label for="firstName" class="form-label">Prénom</label>
          <input
            type="text"
            class="form-control"
            id="firstName"
            name="first_name"
          />
        </div>
        <div class="col-md-6">
          <label for="password" class="form-label">Nouveau mot de passe</label>
          <input
            type="password"
            class="form-control"
            id="password"
            name="password"
          />
          <div class="invalid-feedback" id="password-error"></div>
        </div>
        <div class="col-md-6">
          <label for="confirmPassword" class="form-label"
            >Confirmer le mot de passe</label
          >
          <input
            type="password"
            class="form-control"
            id="confirmPassword"
            name="confirm_password"
          />
          <div class="invalid-feedback" id="confirm-password-error"></div>
        </div>
        <div class="col-md-6">
          <label for="profileImage" class="form-label">Photo de profile</label>
          <input
            type="file"
            class="form-control"
            id="profileImage"
            name="profile_image"
            accept="image/*"
          />
        </div>

        <!-- ✅ Zone pour les messages -->
        <div class="col-12">
          <div id="messageBox" class="mt-2"></div>
        </div>

        <div class="col-12 text-center d-flex justify-content-end">
          <button type="submit" class="btn btn-primary">
            Enregistrer les modifications
          </button>
        </div>
      </form>
    </main>

    <!-- Footer -->
    <footer class="py-4 bg-dark text-white">
      <div class="container">
        <div class="row justify-content-between text-center text-lg-start">
          <div class="col-lg-3 mb-3">
            <h5>Charité Espoir</h5>
            <p>
              Nous œuvrons chaque jour pour un monde plus solidaire. Merci de
              soutenir notre mission.
            </p>
          </div>
          <div class="col-lg-2 mb-3">
            <h5>Navigation</h5>
            <ul class="list-unstyled">
              <li>
                <a href="index.html" class="text-white" id="footer-links"
                  >Accueil</a
                >
              </li>
              <li>
                <a href="#" class="text-white" id="footer-links">Profile</a>
              </li>
            </ul>
          </div>
          <div class="col-lg-2 mb-3">
            <h5>Suivez-nous</h5>
            <div>
              <a href="#"
                ><i class="fab fa-facebook-f text-white" id="footer-social"></i
              ></a>
              <a href="#"
                ><i class="fab fa-instagram text-white" id="footer-social"></i
              ></a>
            </div>
          </div>
        </div>
        <div class="text-center pt-3 footer-bottom">
          <p class="mb-0">&copy; 2025 Charité Espoir • Tous droits réservés</p>
        </div>
      </div>
    </footer>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
      const token =
        localStorage.getItem("access_token") ||
        sessionStorage.getItem("access_token");
      if (!token) {
        window.location.href = "login.html"; // Redirige vers login si pas de token
      }
    </script>
    <script src="js/main.js"></script>
    <script src="js/profile.js"></script>
  </body>
</html>
